<div class="users-container">
  <div class="users-header">
    <h2>User Management</h2>
    <div class="users-actions">
      <button (click)="exportToCsv()" class="btn btn-secondary">Export CSV</button>
      <button (click)="deleteSelectedUsers()" class="btn btn-danger" [disabled]="!hasSelection()">
        Delete Selected ({{ selectedUsers().length }})
      </button>
      <button
        (click)="openCreateModal()"
        class="bg-blue-500 text-white px-4 py-2 rounded-md cursor-pointer"
      >
        Create User
      </button>
    </div>
  </div>

  @if (isBrowser) {
  <ag-grid-angular
    style="width: 100%; height: 600px"
    [theme]="theme()"
    (gridReady)="onGridReady($event)"
    [columnDefs]="columnDefs"
    [defaultColDef]="defaultColDef"
    [rowData]="users()"
    [rowSelection]="rowSelection"
    [pagination]="true"
    [paginationPageSize]="10"
    [paginationPageSizeSelector]="[10, 20, 50, 100]"
    [animateRows]="false"
    [enableCellTextSelection]="true"
    [suppressRowClickSelection]="false"
    (cellValueChanged)="onCellValueChanged($event)"
    (selectionChanged)="onSelectionChanged($event)"
  />
  } @else {
  <div class="loading-placeholder">
    <p>Loading grid...</p>
  </div>
  }
  <app-add-user-modal
    [isCreateModalOpen]="isCreateModalOpen()"
    (closed)="closeCreateModal()"
    (createUser)="createUserHandler($event)"
  >
  </app-add-user-modal>
</div>
